<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Formulaire</title>
  <link rel="stylesheet" href="style.css">
</head>

<!--

Feuille de score It's a Wonderful World
Idée 1 : Demander le nombre de joueurs > nb_bouton = nb_joueurs > entrer les données pour chaque joueur > remplir un tableau avec les données.
Idée 2 : Demander le nombre de joueurs > créer un tableau avec un nb d'entrée = au nb de joueurs > remplir les champs pour chacun > créer un tableau des scores.

- Programmer les différents calculs de points :
  - pt victoire brut
  - Nb cartes couleur x Multiplicateur [gris, noir, vert, jaune, bleu]
  - Nb jetons x (Multiplicateur + 1) [Jeton femme rouge, Jeton homme bleu]
- Mettre en forme fiche 1 joueur
- Créer les fiches en dynamique en fonction du nb de joueurs

-->

<body>
  <form name="fromulaire">
    <table>
      <tr>
        <th>Joueur</th>
        <th>Points de victoire</th>
        <th>Noir</th>
        <th>Jaune</th>
        <th>Vert</th>
        <th>Bleu</th>
        <th>Jetons rouges</th>
        <th>Jetons bleus</th>
        <th>Total</th>
      </tr>
      <tr id="ligne_joueur">
        <td>Joueur 1</td>
        <td>
          <input type="text" class="pts_vict direct" name="pts_vict" id="pts_vict">
        </td>
        <td>
          <input type="number" class="nombre carte noir" name="pts_cartes_noires" placeholder="Nb cartes"> x
          <input type="number" class="multiplicateur carte noir" name="mult_cartes_noires" placeholder="Multiplicateur">
       </td>
        <td>
          <input type="number" class="nombre carte jaune" name="pts_cartes_jaunes" placeholder="Nb cartes"> x
          <input type="number" class="multiplicateur carte jaune" name="mult_cartes_jaunes" placeholder="Multiplicateur">
        </td>
        <td>
          <input type="number" class="nombre carte vert" name="pts_cartes_vertes" placeholder="Nb cartes"> x
          <input type="number" class="multiplicateur carte vert" name="mult_cartes_vertes" placeholder="Multiplicateur">
        </td>
        <td>
          <input type="number" class="nombre carte bleu" name="pts_cartes_bleues" placeholder="Nb cartes"> x
          <input type="number" class="multiplicateur carte bleu" name="mult_cartes_bleues" placeholder="Multiplicateur">
        </td>
        <td>
          <input type="number" class="nombre jeton rouge" name="pts_jetons_rouges" placeholder="Nb jetons"> x
          <input type="number" class="multiplicateur jeton rouge" name="mult_jetons_rouges" placeholder="Multiplicateur">
        </td>
        <td>
          <input type="number" class="nombre jeton bleu" name="pts_jetons_bleus" placeholder="Nb jetons"> x
          <input type="number" class="multiplicateur jeton bleu" name="mult_jetons_bleus" placeholder="Multiplicateur">
        </td>
        <td><input type="number" class="pts_vict total" disabled></td>
      </tr>
    </table>
    <input type="button" name="calculer" value="Calculer" onclick="calc_score_ligne()">
    <input type="button" name="aj_li" value="ajouter une ligne" onclick="ajouter_ligne()">
  </form>

<!-- Intégration de mon Javascript -->
  <script type="text/javascript">
    function ajouter_ligne() {
      var ligne = document.getElementById('ligne_joueur');
      var ligne_prime = ligne.cloneNode(true);
      ligne.after(ligne_prime);
      console.log(ligne_prime.getElementsByClassName('nombre carte bleu'));
      ligne_prime.getElementsByClassName('nombre carte bleu')[0].setAttribute('id', 'toto');
    }

    //Calcul du score
    //calculer score des cartes par couleur
    function calc_score_carte(ligne, couleur){
      return calc_score_generique(ligne, "carte", couleur);
    }
    //calculer score des jetons par couleur
    function calc_score_jeton(ligne, couleur){
      return calc_score_generique(ligne, "jeton", couleur);
    }
    //va chercher les identifiants et calcul en fonction de...
    function calc_score_generique(ligne, type, couleur){
      var selecteur_nb = "nombre " + type + " " + couleur;
      var selecteur_multiplicateur = "multiplicateur " + type + " " + couleur;
      return ligne.getElementsByClassName(selecteur_nb)[0].value * ligne.getElementsByClassName(selecteur_multiplicateur)[0].value;
    }

    function calc_score_ligne(){
      var ligne = document.getElementById('ligne_joueur');
      var total = parseInt(ligne.getElementsByClassName('pts_vict direct')[0].value);
      total += calc_score_carte(ligne, "noir");
      total += calc_score_carte(ligne, "jaune");
      total += calc_score_carte(ligne, "vert");
      total += calc_score_carte(ligne, "bleu");
      total += calc_score_jeton (ligne, "rouge");
      total += calc_score_jeton (ligne, "bleu");
      ligne.getElementsByClassName('pts_vict total')[0].value = total;
    }
  </script>
<!-- Intégration de la feuille de script -->
  <script type="text/javascript" src="js/script.js"></script>
</body>
</html>
